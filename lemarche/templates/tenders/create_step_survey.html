{% extends "tenders/create_base.html" %}
{% load static bootstrap4 %}

{% block step_title %}Evaluation de l’impact{% endblock %}
{% block step_title_again %}Evaluation de l’impact{% endblock %}
{% block step_subtitle %}
Aidez-nous à évaluer l'impact de la plateforme du Marché de l’inclusion en répondant à ces quelques questions.<br />
<i class="fs-sm"> ⚠️ Ces informations sont anonymisées et exploitées à des fins statistiques. Elles resteront strictement confidentielles.</i>
{% endblock %}

{% block content_form %}
<div class="row mb-3 mb-lg-5">
    <div class="col-12 col-lg-9" id="serveyTender">
    {% bootstrap_field form.scale_marche_useless  form_group_class="form-group mb-4" %}
    {% bootstrap_field form.worked_with_inclusif_siae_this_kind_tender  form_group_class="form-group mb-4" %}
    <div id="div_is_encouraged_by_le_marche" class="{% if form.worked_with_inclusif_siae_this_kind_tender.value == '1' %}d-none{% endif %}">
        {% bootstrap_field form.is_encouraged_by_le_marche  form_group_class="form-group form-group-required mb-4" %}
    </div>
        {% bootstrap_field form.providers_out_of_insertion  form_group_class="form-group mb-4" %}
    {% bootstrap_field form.le_marche_doesnt_exist_how_to_find_siae  form_group_class="form-group" %}
    </div>
    <div class="col-12 col-lg-3">
        <div class="alert alert-info mt-3 mt-lg-0" role="alert">
            <p class="mb-0 fs-sm">
                *Le terme "Prestataire inclusif" fait référence aux structures agréées Insertion ou Handicap.
                <br>
                <br>
                ⚠️ Ici, le terme “Prestataire inclusif” ne fait pas référence à l'ensemble des prestataires relevant de l'E.S.S (Économie Sociale & Solidaire)            </p>
        </div>
    </div>
</div>
{% endblock %}


{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    {% comment %} div of the question 3 {% endcomment %}
    let divIsEncouragedByLeMarche = document.getElementById('div_is_encouraged_by_le_marche');

    let kindRadios = document.querySelectorAll('input[type=radio][name="survey-worked_with_inclusif_siae_this_kind_tender"]');
    kindRadios.forEach(radio => radio.addEventListener('change', () => {
        let displayQuestion3 = ["0", "?"].includes(radio.value)
        if (displayQuestion3) {
            divIsEncouragedByLeMarche.classList.remove('d-none');
            question3Response = divIsEncouragedByLeMarche.querySelector('input')
            question3Response.required = true;
        } else {
            divIsEncouragedByLeMarche.classList.add('d-none');
            question3Response = divIsEncouragedByLeMarche.querySelector('input')
            question3Response.required = false;
            question3ResponseChecked = divIsEncouragedByLeMarche.querySelector('input:checked')
            if(question3ResponseChecked){
                question3ResponseChecked.checked = false;
            }
        }
    }));


});
</script>
{% endblock %}
